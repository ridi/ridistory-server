<?php
namespace Story\Util;

class IpChecker
{
	private static $kr_range = array(17498112,17563647,17825792,18087935,23068672,24117247,28311552,28442623,29949952,30015487,30408704,33554431,98598656,98598911,234889216,234913791,235143168,235405311,236978176,241172479,243302400,243400703,243924992,243990527,247484416,247488511,248381440,248446975,453050368,453115903,455278592,455344127,459309056,459325439,459571200,459735039,460283904,460292095,460357632,460423167,460554240,460587007,460603392,460718079,460734464,460865535,461012992,461045759,461144064,461209599,461242368,461258751,463470592,465043455,468189184,468713471,469712896,469729279,606470144,606601215,624578144,624578175,624580736,624580767,635338496,635338751,637334528,637334783,654573568,654835711,655360000,656408575,661651456,662700031,705167360,707788799,710017024,710082559,822149120,822214655,822607872,822870015,823132160,824180735,825360384,825361407,825364480,825376767,825393152,825409535,825753600,826277887,830521344,830529535,831389696,831512575,832569344,833617919,837566464,837599231,837697536,837746687,837779456,837795839,838205440,838238207,838270976,838336511,838729728,838795263,839333256,839333263,839340048,839340055,839370464,839370471,840335380,840335383,974979072,975044607,977354752,977371135,977797120,978321407,978788352,978796543,979763200,979894271,980942848,981467135,982171648,982188031,982253568,982515711,982581248,982614015,982695936,982712319,982757376,982759423,982777856,983039999,984875008,984956927,985137152,985202687,987758592,988807167,989855744,991952895,995540992,995557375,999686144,999751679,999800832,999817215,999849984,999866367,1002045440,1002176511,1019478016,1019609087,1020629540,1020629567,1020639340,1020639343,1020639584,1020639587,1020640304,1020640307,1020640408,1020640411,1020640416,1020640447,1020640456,1020640467,1020640472,1020640479,1020640488,1020640488,1020640492,1020640495,1020640512,1020640519,1020640528,1020640531,1020640544,1020640548,1020640552,1020640559,1020640580,1020640583,1020640612,1020640663,1020640672,1020640699,1020640736,1020640739,1020641088,1020641091,1020641096,1020641103,1020641152,1020641155,1020641200,1020641203,1020686360,1020686363,1023213568,1023238143,1023721472,1023737855,1023778816,1023787007,1025507328,1026293759,1026539520,1026555903,1028128768,1029046271,1029701632,1030750207,1039511552,1039515647,1039523840,1039532031,1039613952,1039638527,1039646720,1039654911,1039663104,1040187391,1063895040,1063899135,1081616688,1081616703,1117189952,1117190015,1122535424,1122538495,1136694304,1136694311,1136694320,1136694327,1161885696,1161885823,1210359521,1210359527,1210363465,1210363471,1211599864,1211599871,1245665880,1245665887,1343219712,1343219967,1346588160,1346588671,1539492864,1539493375,1540016384,1540016639,1694566400,1694568447,1694572544,1694580735,1697988608,1697996799,1698103296,1698136063,1699676160,1699741695,1701150720,1701183487,1707737088,1707802623,1709899776,1709965311,1710882816,1710948351,1728203776,1728204799,1728207872,1728208895,1728259072,1728260095,1728327680,1728328703,1728353280,1728354303,1728360448,1728362495,1728413696,1728414719,1728417792,1728418815,1728464896,1728465919,1728466944,1728467967,1728472064,1728473087,1728490496,1728491519,1728520192,1728521215,1728603136,1728604159,1728636416,1728636671,1728651264,1728652287,1728675840,1728676863,1728732160,1728733183,1728763904,1728764927,1728780288,1728781311,1728788480,1728789503,1728806912,1728807935,1728903168,1728904191,1728918528,1728919551,1728990464,1728990975,1729330176,1729331199,1729393664,1729394687,1729480704,1729481727,1729551360,1729552383,1729581056,1729583103,1729855488,1729856511,1729903616,1729905663,1730060288,1730061311,1730130944,1730131967,1743789056,1743790079,1743794176,1743795199,1743866880,1743867903,1743877120,1743878143,1743983616,1743984639,1744189440,1744190463,1744235520,1744236543,1744296960,1744297983,1744529408,1744530431,1779040256,1779073023,1784676352,1785200639,1794113536,1795162111,1845772288,1845788671,1845854208,1845886975,1846018048,1846542335,1847738368,1847754751,1847787520,1847803903,1847812096,1847853055,1848385536,1848393727,1848426496,1848639487,1849950208,1850212351,1850490880,1850507263,1850510336,1850511359,1851528192,1851529215,1851555840,1851588607,1851594752,1851596799,1851617280,1851637759,1856307200,1856315391,1856323584,1856339967,1856782336,1856798719,1860722688,1860726783,1866563584,1866579967,1866715136,1866727423,1868267520,1868283903,1868348416,1868349439,1870004224,1870036991,1873477632,1873510399,1876557824,1876688895,1876762624,1876764671,1883770880,1883783167,1883799552,1883832319,1884028928,1884159999,1885995008,1886191615,1886199808,1886207999,1886978048,1886986239,1887027200,1887043583,1887764480,1887813631,1887993856,1888026623,1888071680,1888073727,1888239616,1888255999,1888260096,1888264191,1888272384,1888288767,1888485376,1891631103,1891942400,1891950591,1892941824,1893015551,1893072896,1893138431,1893203968,1893728255,1896480768,1896497151,1897201664,1897209855,1897758720,1897779199,1897784832,1897785343,1897791488,1897824255,1899268096,1899270143,1899282432,1899290623,1899724800,1899741183,1899757568,1899831295,1899849728,1899850751,1904361472,1904369663,1904377856,1904476159,1908424704,1908441087,1908756480,1908760575,1908801536,1908899839,1909981184,1910112255,1914503168,1914552319,1914568704,1914576895,1914580992,1914585087,1914601472,1914634239,1914642432,1914650623,1914662912,1914667007,1916010496,1916141567,1917190144,1917321215,1919680512,1919729663,1919817728,1919819775,1919844352,1919877119,1919885312,1919893503,1919926272,1919942655,1921073152,1921089535,1921105920,1921122303,1921843200,1921851391,1921853440,1921855487,1921900544,1921908735,1925644288,1925660671,1925677056,1926234111,1929379840,1930952703,1931436032,1931444223,1932001280,1932132351,1933836288,1933901823,1933926400,1933934591,1934032896,1934098431,1934925824,1934927871,1934991360,1934999551,1935015936,1935081471,1935147008,1935671295,1937686528,1937702911,1938292736,1938948095,1939865600,1939898367,1939931136,1939996671,1940238336,1940240383,1941053440,1941057535,1941061632,1941069823,1941655552,1941657599,1948254208,1949302783,1950547968,1950580735,1950621696,1950629887,1950672896,1950674943,1951662080,1951727615,1952030720,1952038911,1952110592,1952112639,1952292864,1952317439,1954021376,1954545663,1958825984,1958830079,1959239680,1959241727,1959264256,1959395327,1960050688,1960058879,1962885120,1962901503,1963982848,1964113919,1964265472,1964269567,1964294144,1964310527,1966342144,1966407679,1966424064,1966440447,1966456832,1966473215,1966571520,1966587903,1966768128,1966772223,1970143232,1970274303,1970995200,1971060735,1981808640,1983905791,1984135168,1984151551,1985675264,1985708031,1985712128,1985716223,1986510848,1986519039,1986764800,1986768895,1988083712,1988362239,1988870144,1988886527,1991245824,1991311359,1993867264,1994391551,1995046912,1995177983,1997602816,1997611007,1997619200,1997635583,1997684736,1997701119,1998487552,1998503935,1998581760,1998585855,1999282176,1999290367,2000191488,2000224255,2000355328,2000371711,2000674816,2001207295,2001420288,2001453055,2001559552,2001567743,2001870848,2001879039,2006216704,2006228991,2006253568,2006319103,2007040000,2007048191,2009071616,2011168767,2011938816,2011942911,2011951104,2011953151,2015199232,2015203327,2016559104,2016583679,2018050048,2018115583,2022195200,2022211583,2022572032,2022637567,2022678528,2022703103,2030059520,2030108671,2030125056,2030141439,2033324032,2033328127,2033336320,2033352703,2033377280,2033385471,2033516544,2033582079,2033631232,2033647615,2033664000,2033696767,2034237440,2034499583,2035154944,2035220479,2035810304,2035875839,2036613120,2036629503,2036711424,2036715519,2036719616,2036727807,2038169600,2038366207,2038382592,2038415359,2038431744,2042626047,2043166720,2043183103,2046558208,2046705663,2046722048,2046754815,2046822400,2046824447,2046828544,2046836735,2047492096,2047492351,2048917504,2049966079,2050048000,2050064383,2053341184,2053373951,2053382144,2053390335,2053439488,2053505023,2055217152,2055229439,2055241728,2055274495,2055327744,2055329791,2055335936,2055340031,2056806400,2056814591,2056847360,2056912895,2059878400,2059927551,2060066816,2060075007,2060091392,2060189695,2063351808,2063368191,2063384576,2063392767,2063499264,2063532031,2063597568,2063601663,2065694720,2066743295,2070061056,2070077439,2070102016,2070118399,2070192128,2070200319,2070679552,2070683647,2070716416,2070724607,2070740992,2070806527,2070872064,2070937599,2072772608,2073034751,2076639232,2076671999,2076721152,2076737535,2077491200,2077753343,2078539776,2078670847,2079850496,2079916031,2079981568,2080112639,2080260096,2080268287,2080276480,2080309247,2080374784,2080636927,2080702464,2080767999,2082209792,2082258943,2083389440,2083454975,2083520512,2084569087,2084745216,2084749311,2084753408,2084757503,2085617664,2085683199,2087649280,2087714815,2089287680,2089549823,2089943040,2089959423,2090434560,2090467327,2093088768,2093154303,2093195264,2093203455,2093211648,2093219839,2093318144,2093342719,2093350912,2093383679,2093416448,2093432831,2093441056,2093441535,2093441792,2093442591,2093442624,2093444767,2093444776,2093445119,2093449216,2093481983,2094530560,2094596095,2094645248,2094653439,2096300032,2096332799,2097053696,2097086463,2097505984,2097505999,2097643520,2097676287,2099216384,2099232767,2100887552,2100953087,2101084160,2101116927,2101149696,2101182463,2101270528,2101272575,2105540608,2107637759,2108686336,2109734911,2110799872,2110816255,2110832640,2110865407,2110898176,2110914559,2112880640,2113683455,2156265472,2156331007,2180907008,2180972543,2253062144,2253127679,2302935040,2303000575,2341863424,2341928959,2380201984,2380267519,2415394816,2415460351,2466643968,2466709503,2469068800,2469134335,2469265408,2469396479,2526412800,2526478335,2528575488,2528641023,2556624896,2556690431,2559950336,2559950591,2559955712,2559955967,2559956224,2559956479,2615541760,2615607295,2626879488,2626945023,2638282752,2638348287,2646933504,2646999039,2709127168,2709192703,2744647680,2744713215,2746482688,2746548223,2748645376,2748710911,2749235200,2749300735,2749693952,2749759487,2750349312,2750414847,2751397888,2751463423,2759589888,2759720959,2776891392,2777022463,2777481216,2777546751,2780430336,2780495871,2782199808,2782265343,2783248384,2783313919,2784165888,2784231423,2784362496,2784428031,2790195200,2790260735,2793209856,2793275391,2823684096,2823749631,2826108928,2826174463,2826829824,2826895359,2827157504,2827223039,2830893056,2830958591,2832924672,2832990207,2834825216,2834956287,2844524544,2844590079,2848980992,2850029567,2928548736,2928548751,2928556256,2928556263,2928556824,2928556831,2928595656,2928595663,2937856000,2937860095,2938699776,2938703871,2939002880,2939004927,2939011072,2939027455,2942976000,2942992383,2943041536,2943057919,2943291392,2943295487,2943352832,2944401407,2946367488,2946375679,2947579904,2947583999,2948595712,2950178815,2950179840,2950184959,2950192128,2950227967,2950230016,2950478847,2950479872,2950492159,2950493184,2950494207,2950495232,2950551551,2950552576,2950555647,2950556672,2950560767,2950561792,2950669311,2950670336,2952790015,3024093184,3024617471,3025141760,3025403903,3025944576,3025960959,3025989632,3025993727,3028484096,3028500479,3028549632,3028811775,3029644288,3029645311,3029778432,3029788671,3031826432,3031891967,3032301568,3032317951,3032330240,3032334335,3033661440,3033694207,3033710592,3033712639,3033726976,3033743359,3034504192,3034505215,3034578944,3035103231,3035217920,3035234303,3035365376,3035627519,3055484928,3055550463,3056734208,3056746495,3064029184,3064135679,3064168448,3064201215,3064725504,3064791039,3064811520,3064823807,3064832000,3064840191,3066036224,3066560511,3067084800,3068657663,3068993536,3069018111,3069034496,3069050879,3069968384,3069984767,3070001152,3070033919,3070197760,3070230527,3075375104,3075383295,3075391488,3075407871,3075915776,3075932159,3076161536,3076169727,3076243456,3076259839,3076521984,3078619135,3221576192,3221576447,3229880064,3229880319,3237345792,3237346047,3261797120,3261797375,3389198336,3389202431,3389415168,3389415423,3389562880,3389571071,3389938176,3389938687,3389941504,3389941759,3389957376,3389957631,3390329344,3390330623,3390333696,3390333951,3390338816,3390339071,3390341120,3390375935,3390447616,3390455807,3390963712,3390972671,3390972928,3390973695,3390973952,3390977023,3390977536,3390978047,3390978560,3390978815,3390979072,3391068671,3391068928,3391069183,3391074304,3391075583,3391075840,3391082495,3391083520,3391085567,3391086592,3391094783,3391827968,3391832063,3392919552,3392921599,3393511424,3393519615,3393815552,3393816575,3394635776,3394637823,3394862080,3394863103,3394893824,3394894847,3397283840,3397285887,3397411840,3397412863,3397588992,3397591039,3397718016,3397722111,3397939200,3397951487,3398873088,3398877183,3399389184,3399393279,3399712768,3399720959,3399825408,3399826431,3399995392,3399999487,3400267776,3400268799,3400423424,3400424447,3400773632,3400775679,3401416704,3401420799,3406946816,3406947071,3409393664,3409394687,3411085312,3411086335,3411116032,3411124223,3411204864,3411205631,3411206144,3411212287,3411247104,3411255295,3411341312,3411345407,3411681280,3411689471,3412369408,3412377599,3412631552,3412639743,3412918272,3412926463,3413884928,3413893119,3414204416,3414220799,3414223872,3414224895,3414230528,3414231039,3414310912,3414327295,3414339584,3414343679,3414466560,3414474751,3414532096,3414540287,3415121920,3415130111,3415136256,3415136767,3415568384,3415572479,3415777280,3415785471,3415838720,3415842815,3416296448,3416297471,3416707072,3416709119,3416851456,3416851967,3416940544,3416948735,3417022464,3417030655,3417137152,3417145343,3417251840,3417260031,3417291776,3417292799,3418227712,3418228735,3418233344,3418233855,3418398064,3418398079,3419344896,3419348991,3419541504,3419553791,3419693056,3419701247,3419709440,3419717631,3419914240,3419922431,3419971584,3419979775,3420045312,3420061695,3420413952,3420422143,3420434688,3420434943,3420454912,3421077503,3421084160,3421084927,3421093888,3421503487,3421519872,3421528575,3421536256,3421544447,3421552640,3421611519,3421611776,3421613823,3421614080,3421624319,3421625344,3421663231,3421665280,3421716479,3421732864,3422296063,3422296832,3422367743,3422371840,3422415103,3422415360,3422420991,3422421248,3422421503,3422429184,3422429695,3422433792,3422435583,3422445568,3422543359,3422543872,3422546687,3422546944,3422552063,3455592448,3455592703,3455595520,3455595775,3460944384,3460944447,3460944576,3460944671,3460948096,3460948159,3468094272,3468094303,3470458880,3470475263,3480580352,3480580607,3486583808,3486584063,3486634496,3486634751,3508281088,3508281343,3508337664,3508337919,3508338432,3508338687,3512573696,3512573727,3512578048,3512578111,3512579968,3512580031,3512581056,3512581119,3512595712,3512595743,3512595776,3512595839,3512598016,3512598079,3515452640,3515452655,3523223552,3523231743,3523354624,3523362815,3523500032,3523502079,3523532800,3523534847,3524313088,3524329471,3527008256,3527016447,3528966144,3528974335,3529089024,3529097215,3529113600,3529622527,3529629696,3529834495,3529850624,3530506239,3530510336,3530518527,3530522624,3530702847,3530708992,3530711039,3530713088,3530715135,3530727424,3530735615,3530739712,3531538431,3531546624,3531603967,3534880768,3535273983,3535814656,3535822847,3536584704,3536846847,3537027072,3537047551,3537059840,3537068031,3537371136,3537526783,3537534976,3537895423,3542089728,3542306815,3542310912,3542311935,3542315008,3542376447,3542384640,3543114751,3543117824,3543134207,3543138304,3544014847,3544018688,3544145919,3544154112,3544186879,3546808320,3547856895,3551002624,3551313919,3551318016,3552456703,3552473088,3552481279,3552501760,3552514047,3552518144,3552522239,3552526336,3552534527,3552538624,3552546815,3552550912,3552559103,3552571392,3555287039,3555295232,3555393535,3555401728,3555561471,3555565568,3555770367,3555774464,3556696063,3556703232,3556769791,3659792384,3659890687,3659907072,3660054527,3660578816,3661103103,3661142064,3661142067,3661142466,3661142473,3661142475,3661142475,3661142485,3661142485,3661142492,3661142501,3661142853,3661142853,3661142868,3661142876,3661228288,3661228303,3664084992,3664117759,3666870272,3667918847,3671130112,3671195647,3672637440,3672642239,3672642304,3672645695,3672645728,3672645759,3672645952,3672645983,3672646080,3672646399,3672646464,3672646911,3672646976,3672647295,3672647328,3672647935,3672648000,3672648063,3672648160,3672648511,3672648640,3672649599,3672649728,3672649919,3672649984,3672650111,3672650240,3672650815,3672650880,3672651007,3672651072,3672651551,3672651568,3672651615,3672651648,3672652927,3672653248,3672654335,3672654528,3672654591,3672654656,3672655743,3672655840,3672655863,3672655872,3672659647,3672659680,3672659839,3672659904,3672662591,3672662656,3672662847,3672663040,3672667711,3672667968,3672668607,3672668656,3672677791,3672677824,3672678015,3672678080,3672678783,3672678816,3672678847,3672678912,3672679167,3672679296,3672679615,3672679680,3672680223,3672680320,3672681119,3672681152,3672681375,3672681408,3672682655,3672682688,3672682879,3672683008,3672683391,3672683520,3672684607,3672684672,3672684799,3672684864,3672684927,3672684992,3672686079,3672686592,3672694975,3672695040,3672695295,3672695328,3672695359,3672695424,3672699775,3672699904,3672701439,3672701568,3672701695,3672701888,3672702015,3672702048,3672702783,3672702848,3672706751,3672706816,3672710463,3672710496,3672710655,3672710720,3672720959,3672721088,3672722111,3672722176,3672727071,3672727104,3672733183,3672733248,3672733311,3672733440,3672733503,3672733568,3672738623,3672738688,3672738911,3672738928,3672739967,3672740032,3672740047,3672740096,3672740127,3672740224,3672740991,3672741024,3672741311,3672741376,3672741503,3672741536,3672741567,3672741600,3672741823,3672741840,3672741855,3672741888,3672742207,3672742272,3672742399,3672742464,3672742527,3672742656,3672746143,3672746176,3672746207,3672746240,3672746623,3672746688,3672747263,3672747392,3672747583,3672747648,3672747711,3672748032,3672749567,3672750080,3672750207,3672750272,3672750847,3672750912,3672751487,3672751616,3672753407,3672753664,3672754143,3672754176,3672754495,3672754560,3672754751,3672754816,3672756831,3672756864,3672756991,3672757056,3672758975,3672759008,3672759423,3672759616,3672759679,3672759808,3672760639,3672760704,3672760831,3672760896,3672760959,3672760992,3672761023,3672761088,3672761215,3672761344,3672768063,3672768128,3672768191,3672768256,3673161727,3689938944,3690070015,3690463232,3690987519,3695181824,3697278975,3697737728,3697803263,3698589696,3699376127,3700752384,3700817919,3706060800,3706126335,3716431872,3716440063,3716493312,3716493567,3716493824,3716494079,3716494336,3716494591,3716495360,3716495615,3716496384,3716497407,3716513792,3716530175,3716808704,3718840319,3730833408,3732602879,3739680768,3739697151,3739746304,3740270591,3741024256,3741057023,3743055872,3743088639,3743186944,3743219711,3743416320,3745513471,3749855232,3749969919,3752165376,3752198143,3752329216,3752853503,3754033152,3754164223,3755868160,3755933695,3757899776,3757965311,3758080000,3758088191);
	private static $kr_range_len = 1756;

	public static function isKoreanIp($ip_str)
	{
		$ip_dec = (float)ip2long($ip_str);
		for ($i = 0; $i < self::$kr_range_len; $i += 2) {
			if ($ip_dec >= self::$kr_range[$i] && $ip_dec <= self::$kr_range[$i + 1]) {
				return true;
			}
		}
		return false;
	}
}
